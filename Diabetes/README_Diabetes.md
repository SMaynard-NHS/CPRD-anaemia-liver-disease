Diabetes codelist was generated to capture patients with current diagnosis of diabetes, excluding gestational diabetes and history of diabetes

Step 1: Identify terms that capture all QOF codes of interest
  - QOF code lists available from Primary Care Domain (PCD) reference set portal from NHS Digitial (PCD_Refset20240215)
  - Diabetes QOF population identified from reference set cluster description 'Diabetes mellitus codes'
  - All 85 QOF diabetes SNOMED descriptions captured using terms 'diabet' 'wolfram' 'pancreatic agenesis'

Step 2: Build on relevant search terms from existing codelists and subject specific knowledge
  - Inclusion terms: diabet|IDDM|insulin|wolfram|(?=.*hb)(?=.*control)|(?=.*pancreatic)(?=.*agenesis) 

Step 3: Curate exclusion terms based on EMIS codelist generated by inclusion terms above
  - Exclusion terms: gestational|pre-diab|prediab|non-diab|nondiab|insipidus|transient|FH|H/O|history|family|relative|staff| caregiver|prevention|CHADS2|CHA2DS2-VASc|ABCD2|UKPDS|liverpool|risk score|QDscore|risk calculator|risk of diab|risk of type 2|risk assessment declined|urine screen|consent status|written|leaflet|infant|(?=.*fam)(?=.*hist)|(?=.*review)(?=.*declined)|(?=.*risk)(?=.*invitation)|(?=.*insulin)(?=.*resistance)|insulin-shock|insulin shock|(?=.*insulin)(?=.*level)|(?=.*insulin)(?=.*test)|measurement|level|insulinaemia|insulinoma|insulinism|overdose|poison|concentration|stopped|signpost|diabetes 2 score|not to have diabetes| high risk review | growth factor

Step 4a: Independent clinician review of codelist and amendment of inclusion and exclusion terms to generate agreed final codelist with clinical judgement on categories: T1 T2 or unknown

Step 4b: Check all SNOMEDCT codes of QOF diabetes refset present in final list (incase snomedct and emis descirptions differ)

Step 5: Separate codelist to exclude patients following recorded resolved diabetes

All code was run on python using jupyter notebook

Thanks to Joseph Lee for sharing previous generated diabetes codelist to help develop this one
